FROM registry.fedoraproject.org/fedora-minimal@sha256:0f8408100c4e570f0fa724a75adb729d1103aa77b924e5827316efd90da615b2

RUN microdnf -y upgrade
RUN microdnf -y install python gcc python3-devel git-core /usr/bin/pip

ADD . /src

RUN mv -v /src/image/*.crt /etc/pki/ca-trust/source/anchors && update-ca-trust
ENV REQUESTS_CA_BUNDLE=/etc/pki/tls/certs/ca-bundle.crt

RUN cd /src && pip install -rtest-requirements-3.11.txt && pip install .

ENTRYPOINT ["/usr/local/bin/mirror-tool"]
